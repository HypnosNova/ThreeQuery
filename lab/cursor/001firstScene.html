<!DOCTYPE html>
<html>

	<head>
		<meta charset=utf-8>
		<title>第一个场景</title>

	</head>

	<body>
		<script src="../../lib/three.min.js"></script>
		<script src="../../js/threeQuery.min.js"></script>
		<script src="../../lib/OrbitControls.js" type="text/javascript" charset="utf-8"></script>
		<script>
			var [scene, renderer, camera] = $$.init();
			$$.animate();

			var box,ba;
			addBox();

			function addBox() {
				//创建一个立方体
				var geometry = new THREE.BoxGeometry(3, 3, 3);
				var material = new THREE.MeshLambertMaterial({
					color: 0xff0000
				});
				box = new THREE.Mesh(geometry, material);
				box.position.set(20,0,0);
				scene.add(box);
				//加入一个白光
				var directionalLight = new THREE.DirectionalLight(0xffffff, 0.9);
				directionalLight.position.set(0, 1,1);
				scene.add(directionalLight);
				//加入环境光
				var light = new THREE.AmbientLight(0x222222);
				scene.add(light);
				
				ba=box.clone();
				scene.add(ba);
				camera.lookAt(ba.position);
				
				var controls=$$.Controls.createOrbitControls();
			}
			
			
			var vector;
			$$.worldActions = function() {
				box.rotation.x += 0.01;
				box.rotation.y += 0.01;
				//console.log($$.global.raycaster.ray.direction)
				
				vector = new THREE.Vector3(); // create once and reuse it!
				camera.getWorldDirection( vector );
				
				ba.position.set(vector.x*20,vector.y*20,vector.z*20);
				ba.lookAt(camera.position);
			};
		</script>
	</body>

</html>